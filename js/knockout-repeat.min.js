// REPEAT binding for Knockout http://knockoutjs.com/
// (c) Michael Best
// License: MIT (http://www.opensource.org/licenses/mit-license.php)
// Version 1.5.0

(function(e){if(typeof define==="function"&&define["amd"]){define(["knockout"],e)}else{e(window["ko"])}})(function(e){function t(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}if(!e.bindingFlags){e.bindingFlags={}}var n=t(e.observable.fn,e.observable);e.bindingHandlers["repeat"]={flags:e.bindingFlags.contentBind,init:function(t,r,i,s,o){var u=e.utils.unwrapObservable(r());if(u&&typeof u=="object"&&!("length"in u)){var a=u["index"],f=u["item"],l=u["step"],c=u["reverse"],h=u["bind"],p=u["init"],d=u["update"]}a=a||"$index";f=f||e.bindingHandlers["repeat"]["itemName"]||"$item";l=l||1;c=c||false;e.cleanNode(t);t.removeAttribute("data-bind");if(!h){h=t.getAttribute("data-repeat-bind");if(h){t.removeAttribute("data-repeat-bind")}}var v=t.cloneNode(true);if(typeof h=="string"){v.setAttribute("data-bind",h);h=null}var m=t.parentNode,g=document.createComment("ko_repeatplaceholder");m.replaceChild(g,t);var y=0,b=e.observable(),w;if(p){p(m)}var E=e.dependentObservable(function(){function t(t){var r=function(n){var r=w[t];if(!arguments.length){b();return e.utils.unwrapObservable(r)}else if(e.isObservable(r)){return r(n)}else{w[t]=n}};r[n]=e.observable;return r}function i(e,t,n){return w?function(){return h.call(s,e,t,n)}:function(){return h.call(s,t,n)}}var u=e.utils.unwrapObservable(r()),p=0;if(u&&typeof u=="object"){if("length"in u){w=u;p=w["length"]}else{if("foreach"in u){w=e.utils.unwrapObservable(u["foreach"]);if(w&&typeof w=="object"&&"length"in w){p=w["length"]||0}else{p=w||0;w=null}}if("count"in u)p=e.utils.unwrapObservable(u["count"])||p;if("limit"in u)p=Math.min(p,e.utils.unwrapObservable(u["limit"]))||p}}else{p=u||0}for(;y>p;y-=l){e.removeNode(c?g.nextSibling:g.previousSibling)}b["notifySubscribers"]();for(;y<p;y+=l){var E=v.cloneNode(true);m.insertBefore(E,c?g.nextSibling:g);E.setAttribute("data-repeat-index",y);if(w&&f=="$data"){var S=o.createChildContext(t(y))}else{var S=o.extend?o.extend():e.utils.extend(new o.constructor,o);if(w)S[f]=t(y)}S[a]=y;if(h){var x=e.applyBindingsToNode(E,i(S[f],y,S),S,true),T=x&&x.shouldBindDescendants}if(!h||x&&T!==false){e.applyBindings(S,E)}}if(d){d(m)}},null,{disposeWhenNodeIsRemoved:g});return{controlsDescendantBindings:true,subscribable:E}}}})
